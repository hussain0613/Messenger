{% extends "base.html" %}

{% block body%}
    {% if user %}
        {% if current_user.role.lower() == 'admin' %}
            {{user.id}}. {{ user.role }}
        {% endif %}
        <h1>{{ user.username }}</h1>
        {% if current_user.role.lower() == 'admin' %}
            | <a href = " {{url_for('auth.edit_role', pk = user.id ) }}">edit_role</a> |
        {% endif %}
        {% if user.id == current_user.id %}
            | <a href = " {{url_for('auth.update_user_info') }}">update info</a> | 
            <!--a href = " {{url_for('auth.change_role_request') }}">ask for change of role</a -->
        {% endif %}

        {% if user.id == current_user.id %}
            | <a href = " {{url_for('auth.delete_user', username = user.username ) }}">delete account</a> |
        {% elif  current_user.role.lower() == 'admin' %}
            | <a href = " {{url_for('auth.delete_user', username = user.username ) }}">remove user</a> |
        {% endif %}

        <hr>
       
        <p>Name: {{ user.name }}</p>
        {% if user.id == current_user.id %}
            <p>email: {{ user.email }}</p>
        {% endif %}
        
        <p>Created by {{ user.creator.username }} on {{ user.creation_date}}</p>
        <p>Last modified by {{ user.last_modifier.username }} on {{ user.last_modified_date}}</p>

        <h3>Actions:</h3>
        <ul>
            {% for action in user.actions %}
                <li>{{ action }}</li>
            {% endfor %}
        </ul>


    {% else %}
        <h3>Post(pk = {{pk}}) not found.</h3>
    {% endif %}
{% endblock %}